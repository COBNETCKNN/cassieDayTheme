jQuery(document).ready((function(o){function t(){o("#form-popup").removeClass("active").addClass("hidden"),o("body").css("overflow","")}o(".cta-button").on("click",(function(t){t.preventDefault();var e=o(this).data("form-id")||localStorage.getItem("formId");e?o.ajax({url:ajax_object.ajaxurl,type:"POST",data:{action:"load_popup_form",form_id:e},success:function(t){o("#form-content").html(t),o("#form-content iframe").on("load",(function(){var t=o(this),e=t.attr("id");console.log("Iframe Loaded: "+e),t.iFrameResize({checkOrigin:!1,log:!0,sizeHeight:!0})})),o("#form-popup").removeClass("hidden").addClass("active"),o("body").css("overflow","hidden")},error:function(){alert("Failed to load form.")}}):alert("Form ID not found.")})),o("#close-popup").on("click",(function(){t()})),o(document).on("keydown",(function(e){27===e.keyCode&&o("#form-popup").hasClass("active")&&t()})),o(document).on("click",(function(e){o("#form-popup").hasClass("active")&&!o(e.target).closest("#form-content, .cta-button").length&&t()}))}));
