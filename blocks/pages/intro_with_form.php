<?php 
/**
 * Flexible content template for Team Cards.
 */

// Retrieve custom class and ID from the ACF fields
$custom_class = get_sub_field('custom_html_class');
$custom_id = get_sub_field('custom_html_id');

$default_class = 'introWithForm';
$default_id = 'introWithForm';

$section_class = $default_class . (!empty($custom_class) ? ' ' . esc_attr($custom_class) : '');
$section_id = $default_id . (!empty($custom_id) ? ' ' . esc_attr($custom_id) : '');

$showSection = get_sub_field('show_section');
$showShapeDecoration = get_sub_field('show_section_decoration');

// Get the spacing array from ACF Dimensions plugin
$spacing = get_sub_field('spacing');

// Fallback function to provide a default value
function get_spacing_value_job_listings($spacing, $key, $default = '0px 0px 0px 0px') {
    return isset($spacing[$key]) && !empty($spacing[$key]) ? $spacing[$key] : $default;
}

$desktopSpacing = get_spacing_value_job_listings($spacing, 'desktop', '250px 0px 250px 0px');
$tabletSpacing = get_spacing_value_job_listings($spacing, 'tablet', '50px 0px 50px 0px');
$mobileSpacing = get_spacing_value_job_listings($spacing, 'mobile', '30px 0px 30px 0px');

global $post;

$background_image = get_sub_field('background_image');

// Check if the background image exists
if ($background_image) {
    $background_image_url = $background_image['url'];
} else {
    $background_image_url = ''; 
}

if ($showSection) { ?>

<section id="<?php echo $section_id; ?>" class="<?php echo $section_class; ?> relative font-plus freeIntro_<?php echo $post->post_name; ?>" style="background-image: url('<?php echo esc_url($background_image_url); ?>'); background-size: cover; background-position: center;">
    <?php
    if(is_page('free-intro-social')) { ?>

        <div class="freeIntroSocial_header py-5 absolute top-0 left-0 w-full">
            <div class="flex justify-center items-center relative z-10">
                <!-- Logo -->
                <?php if (have_rows('header_logo', 'option')): ?>
                    <?php while (have_rows('header_logo', 'option')): the_row(); ?>
                        <div class="">
                            <?php 
                            $headerLogo = get_sub_field('header_logo_image', 'option');
                            // Image variables.
                            $url = $headerLogo['url'];
                            $alt = $headerLogo['alt'];
                            $size = 'large';
                            $thumb = $headerLogo['sizes'][ $size ]; ?>

                            <img class="headerLogo" src="<?php echo esc_url($thumb); ?>" alt="<?php echo esc_attr($alt); ?>" />
                        </div>
                    <?php endwhile; ?>
                <?php endif; ?>
            </div>
        </div>

    <?php
    }
    ?>
    <!-- Free Intro Socials Header -->
    <div class="container mx-auto w-full h-full container-<?php echo $post->post_name; ?>">
        <div class="grid lg:grid-cols-2 lg:gap-14">
        <!-- Embedded form -->
            <div class="freeIntroEmbedCode_wrapper my-auto relative z-10 order-last lg:order-first">
            <?php 
            $embeddedFormCode = get_sub_field('embed_code_forms');
            $additionalEmbeddedCodeCheck = get_sub_field('additional_form');
            $additionalEmebeddedCode = get_sub_field('additional_embed_code');
            echo $embeddedFormCode;
            if($additionalEmbeddedCodeCheck) {
                echo $additionalEmebeddedCode;
            }
            ?>
            </div>
        <!-- Content -->
            <div class="freeIntroContent_wrapper my-auto">
            <?php
                $editorContent = get_sub_field('content_editor');
                $alignment = get_sub_field('align_content');
                $contentForm = get_sub_field('embed_code');
            ?>
            <!-- Text Content -->
            <?php 
                // Determine the alignment value for inline CSS
                $alignment_style = '';
                if ($alignment == 'left') {
                    $alignment_style = 'left';
                } elseif ($alignment == 'center') {
                    $alignment_style = 'center';
                } elseif ($alignment == 'right') {
                    $alignment_style = 'right';
                }
            ?>
            <div class="freeIntro my-auto relative lg:col-span-3 mb-5 md:mb-0" style="text-align: <?php echo $alignment_style; ?>;">
                <div class="pagesEditor freeIntro_wrapper freeIntro_wrapper__<?php echo $post->post_name; ?> relative z-10">
                    <!-- Content -->
                    <?php echo $editorContent; ?>
                    <!-- Embedded Content Form -->
                    <div class="embeddedContentForm_wrapper mt-14 hidden md:block">
                        <?php echo $contentForm; ?>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>
    <?php if($showShapeDecoration) { ?>
        <svg class="freeIntoDeco" width="524" height="861" viewBox="0 0 524 861" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g opacity="0.19" clip-path="url(#clip0_136_1038)">
            <path d="M524.001 861H88.4743L86.3306 860.945C80.1216 860.702 73.8432 860.459 67.6619 859.883C42.5715 857.197 18.2644 849.557 -3.84936 837.406C-37.0477 819.161 -64.0805 791.474 -81.5219 757.853C-98.9632 724.232 -106.028 686.192 -101.82 648.554C-99.0315 623.491 -91.2923 599.23 -79.0513 577.181C-63.7638 549.615 -41.8901 526.259 -15.3807 509.196C11.1287 492.133 41.4498 481.894 72.8789 479.391L90.2225 478.698L109.266 478.524C109.929 478.49 110.594 478.49 111.257 478.524C111.54 478.535 111.822 478.492 112.089 478.4C112.375 478.318 112.668 478.26 112.963 478.226C113.276 478.171 113.657 478.129 114.039 478.081C114.8 478.034 115.55 477.877 116.266 477.616C116.758 477.47 117.147 477.38 117.535 477.297C118.27 477.167 118.982 476.934 119.651 476.603C124.203 474.987 128.396 472.496 131.993 469.273C135.562 466.089 138.459 462.225 140.517 457.909C142.574 453.592 143.749 448.908 143.974 444.132C143.974 443.438 144.071 442.821 144.168 442.162V0H146V442.301C145.896 442.994 145.84 443.625 145.812 444.222C145.575 449.242 144.339 454.165 142.176 458.703C140.012 463.24 136.966 467.3 133.214 470.646C129.477 474.001 125.119 476.593 120.387 478.275C119.607 478.653 118.778 478.917 117.924 479.058C117.57 479.135 117.23 479.218 116.869 479.315C116.025 479.631 115.139 479.821 114.24 479.877C113.893 479.918 113.546 479.96 113.192 480.016C112.972 480.042 112.754 480.086 112.54 480.147C112.092 480.286 111.622 480.347 111.153 480.328C110.598 480.328 110.001 480.328 109.405 480.328L107.032 480.508L86.9133 480.543L82.2722 480.723L72.976 481.208C32.399 484.496 -6.03765 500.77 -36.6345 527.616C-67.2313 554.463 -88.359 590.452 -96.8847 630.248C-105.41 670.044 -100.88 711.527 -83.9655 748.546C-67.0509 785.565 -38.6528 816.148 -2.98218 835.762C18.9153 847.793 42.9841 855.358 67.8284 858.018C73.9403 858.593 80.2048 858.836 86.2612 859.072L92.6645 859.134H524.001V861Z" fill="#586470"/>
            <path d="M88.3156 708.171C88.1198 708.177 87.924 708.159 87.7329 708.115C86.8607 708.006 85.9826 707.95 85.1036 707.949H83.9866C78.9672 707.417 74.1047 705.888 69.6848 703.451C65.2649 701.014 61.3767 697.719 58.2487 693.759C54.3186 688.837 51.665 683.021 50.5237 676.827C49.3824 670.633 49.7887 664.253 51.7063 658.254C53.624 652.255 56.9938 646.822 61.5165 642.438C66.0392 638.054 71.5749 634.854 77.6319 633.122C80.0356 632.45 82.498 632.009 84.9856 631.805H85.0411C85.7349 631.805 86.2899 631.805 86.8657 631.728L88.7874 631.576L111.175 631.458L115.83 631.257L125.119 630.73C127.249 630.612 129.427 630.286 131.536 629.967C132.466 629.828 133.395 629.689 134.311 629.564C141.137 628.559 146.798 627.664 152.591 626.062C158.217 624.675 164.579 623.038 170.497 620.743C205.925 608.286 236.841 585.567 259.305 555.48C281.769 525.392 294.764 489.3 296.633 451.802L297.015 442.481V358.396V0H298.84V442.543L298.458 451.885C296.541 489.727 283.415 526.145 260.746 556.512C238.078 586.878 206.891 609.822 171.149 622.428C165.148 624.758 158.738 626.374 153.077 627.796C147.222 629.426 141.477 630.334 134.575 631.354C133.638 631.472 132.722 631.61 131.8 631.749C129.649 632.075 127.429 632.443 125.216 632.526L106.991 633.379L87.0461 633.518C86.3842 633.579 85.7197 633.607 85.055 633.601C82.7079 633.798 80.3849 634.218 78.1176 634.856C71.1949 636.835 65.0127 640.817 60.3498 646.302C55.687 651.787 52.7521 658.528 51.9148 665.677C51.3676 670.453 51.7699 675.289 53.0986 679.908C54.4273 684.527 56.6561 688.838 59.657 692.594C62.628 696.354 66.319 699.486 70.5142 701.804C74.7095 704.123 79.3249 705.582 84.0907 706.097C84.396 706.097 84.7845 706.097 85.1175 706.097C86.0454 706.096 86.9724 706.157 87.8924 706.277L88.1283 706.319H524.001V708.15H88.3295L88.3156 708.171Z" fill="#586470"/>
            <path d="M89.1256 835.533C88.4319 835.533 87.6618 835.533 86.531 835.471L84.651 835.394C79.9682 835.193 75.1189 834.992 70.3598 834.555C48.6218 832.229 27.5619 825.612 8.40142 815.087C-20.3701 799.265 -43.7968 775.262 -58.9108 746.118C-74.0248 716.974 -80.146 684.001 -76.4991 651.376C-74.0801 629.665 -67.3763 608.65 -56.7759 589.547C-43.527 565.662 -24.5722 545.426 -1.60123 530.642C21.3697 515.858 47.6429 506.986 74.8761 504.817L90.187 504.193L110.306 503.991L113.455 503.874H113.525C114.086 503.854 114.643 503.779 115.19 503.652C115.606 503.568 116.022 503.485 116.452 503.437C116.882 503.388 117.417 503.291 117.923 503.222C119.406 503.066 120.869 502.767 122.294 502.327C122.883 502.167 123.41 502.036 123.931 501.911C125.358 501.618 126.752 501.183 128.093 500.614C135.805 497.905 142.907 493.706 148.996 488.255C155.058 482.822 159.982 476.241 163.484 468.894C166.986 461.547 168.996 453.578 169.399 445.449L169.621 442.308V0H171.452V442.342L171.23 445.519C170.578 458.117 166.201 470.238 158.653 480.347C151.104 490.456 140.725 498.099 128.829 502.306C127.403 502.914 125.92 503.378 124.403 503.693C123.896 503.818 123.383 503.943 122.876 504.082C121.358 504.554 119.796 504.874 118.214 505.039L116.737 505.254C116.32 505.302 115.96 505.378 115.592 505.448C114.908 505.599 114.211 505.687 113.511 505.711L106.997 506.023L87.086 506.065L74.994 506.648C34.3315 509.913 -3.64986 528.226 -31.5204 558.006C-59.391 587.785 -75.1457 626.888 -75.7027 667.666C-76.2596 708.444 -61.5788 747.963 -34.5319 778.492C-7.48505 809.021 29.982 828.364 70.5402 832.738C75.2438 833.168 80.0653 833.376 84.7273 833.57L86.6143 833.654C87.9185 833.709 88.6955 833.709 89.4933 833.709H524V835.54H89.1256V835.533Z" fill="#586470"/>
            <path d="M89.1059 810.059C88.4122 810.059 87.6768 810.059 86.761 809.997L83.5837 809.851C80.115 809.699 76.5769 809.539 73.0735 809.227C54.689 807.262 36.8783 801.665 20.6749 792.762C-3.67757 779.372 -23.5057 759.055 -36.2969 734.388C-49.0881 709.72 -54.2667 681.812 -51.1763 654.199C-49.1422 635.838 -43.4829 618.064 -34.5264 601.906C-23.3116 581.694 -7.26871 564.569 12.1724 552.059C31.6135 539.549 53.8487 532.042 76.896 530.207L84.3607 529.826C86.4419 529.729 88.6411 529.625 90.209 529.659H106.991C108.01 529.659 108.864 529.59 109.703 529.535L111.465 529.438L115.815 529.243C116.685 529.206 117.551 529.097 118.403 528.917C118.951 528.82 119.499 528.723 120.047 528.654L121.615 528.425C123.911 528.152 126.18 527.688 128.4 527.038L130.183 526.587C132.381 526.1 134.536 525.437 136.627 524.604C147.485 520.767 157.48 514.831 166.042 507.133C174.611 499.465 181.569 490.171 186.514 479.791C191.459 469.412 194.291 458.153 194.847 446.67L195.096 442.308V358.389V0H196.928V442.384L196.678 446.788C196.11 458.511 193.218 470.004 188.17 480.601C183.121 491.197 176.017 500.685 167.27 508.513C158.54 516.36 148.353 522.414 137.287 526.331C135.127 527.205 132.9 527.9 130.627 528.411L128.913 528.848C126.61 529.501 124.257 529.965 121.878 530.235L120.304 530.471C119.756 530.533 119.242 530.623 118.729 530.721C117.787 530.915 116.831 531.031 115.871 531.067L111.542 531.262L109.821 531.359C108.954 531.421 108.073 531.477 107.005 531.49H90.1882C88.655 531.449 86.5113 531.56 84.444 531.657L77.0209 532.031C42.6878 534.796 10.621 550.265 -12.909 575.412C-36.4391 600.559 -49.7401 633.576 -50.2111 668.007C-50.6821 702.438 -38.2892 735.807 -15.4558 761.588C7.37756 787.368 39.0093 803.708 73.2538 807.41C76.7226 807.715 80.2399 807.868 83.66 808.027L86.8582 808.173C87.9404 808.235 88.7521 808.235 89.5707 808.228H523.994V810.059H89.1059Z" fill="#586470"/>
            <path d="M92.0196 784.592C90.3546 784.592 88.6896 784.592 87.0316 784.53C85.6926 784.454 84.3814 784.391 83.0703 784.329C80.6421 784.218 78.214 784.107 75.7929 783.899C60.7584 782.318 46.1897 777.758 32.9382 770.484C19.6866 763.211 8.01789 753.37 -1.38629 741.537C-10.815 729.747 -17.8324 716.218 -22.0391 701.721C-26.1918 687.208 -27.4876 672.028 -25.8547 657.022C-24.2123 641.998 -19.5916 627.453 -12.2624 614.235C-4.93329 601.017 4.95729 589.392 16.8315 580.039C34.6337 565.89 56.2511 557.369 78.9217 555.563C80.2745 555.515 81.5787 555.439 82.8899 555.362C85.2764 555.23 87.7461 555.12 90.195 555.099H101.392C104.736 555.099 108.649 555.099 112.527 554.856L118.139 554.572C119.303 554.507 120.462 554.366 121.608 554.148C122.302 554.038 122.94 553.927 123.613 553.843L125 553.628C128.179 553.237 131.325 552.616 134.414 551.77L136.065 551.347C139.134 550.655 142.148 549.741 145.084 548.614C159.103 543.653 172.01 535.988 183.074 526.053C194.146 516.156 203.137 504.155 209.526 490.751C215.915 477.346 219.572 462.805 220.286 447.974L220.571 442.377V0H222.402V442.419L222.118 448.057C221.397 463.136 217.683 477.921 211.19 491.551C204.698 505.181 195.558 517.383 184.302 527.447C173.073 537.524 159.975 545.3 145.75 550.334C142.754 551.477 139.68 552.404 136.551 553.108L134.949 553.517C131.782 554.384 128.557 555.021 125.299 555.425L123.862 555.64C123.169 555.723 122.551 555.834 121.906 555.938C120.685 556.168 119.45 556.316 118.208 556.382L112.658 556.666C108.732 556.937 104.764 556.95 101.406 556.916H90.1881C87.7877 556.916 85.3319 557.041 82.9939 557.172C81.6758 557.249 80.3577 557.325 79.0327 557.38C56.7396 559.156 35.4832 567.54 17.9831 581.46C6.30259 590.658 -3.42788 602.09 -10.6402 615.088C-17.8525 628.087 -22.402 642.392 -24.0232 657.168C-25.6284 671.938 -24.3539 686.88 -20.27 701.166C-16.1269 715.434 -9.21792 728.748 0.0636349 740.351C9.31032 752.001 20.7871 761.692 33.8231 768.857C46.8592 776.023 61.1931 780.518 75.9871 782.082C78.3667 782.283 80.767 782.394 83.1743 782.505C84.4924 782.567 85.8106 782.63 87.1287 782.706C89.4943 782.775 91.9016 782.768 94.2881 782.761C95.6271 782.761 96.9591 782.761 98.2841 782.761H524.001V784.585H92.0196V784.592Z" fill="#586470"/>
            <path d="M89.1688 759.118C88.378 759.118 87.712 759.118 87.2263 759.056C85.9013 758.959 84.5346 758.896 83.1818 758.834C81.6278 758.765 80.0808 758.695 78.5406 758.571C66.8455 757.341 55.5132 753.791 45.2069 748.13C34.9005 742.468 25.8272 734.809 18.5178 725.599C11.1807 716.426 5.72358 705.897 2.45842 694.615C-0.806744 683.332 -1.81599 671.517 -0.511626 659.845C0.772925 648.165 4.37252 636.859 10.0769 626.586C15.7813 616.313 23.4761 607.279 32.7118 600.013C41.9034 592.724 52.4406 587.315 63.7223 584.096C69.3555 582.508 75.1287 581.468 80.9618 580.989L86.3175 580.718C87.4483 580.649 88.6277 580.579 90.2303 580.607H107.012C108.434 580.607 110.134 580.503 111.799 580.427L120.484 579.969C121.962 579.877 123.432 579.701 124.89 579.442C125.667 579.317 126.437 579.199 127.214 579.095L128.192 578.95C132.346 578.426 136.46 577.622 140.506 576.543L141.769 576.224C145.775 575.301 149.714 574.113 153.562 572.666C179.453 563.569 202.047 546.968 218.462 524.981C234.876 502.994 244.368 476.617 245.726 449.215L246.045 442.384V0H247.877V442.481L247.565 449.354C246.153 477.099 236.526 503.8 219.905 526.064C203.284 548.328 180.419 565.153 154.214 574.4C150.304 575.873 146.299 577.08 142.226 578.013L140.992 578.332C136.863 579.428 132.666 580.246 128.428 580.781L127.436 580.933C126.659 581.03 125.903 581.148 125.146 581.273C123.625 581.542 122.089 581.724 120.547 581.821L111.861 582.272C110.175 582.355 108.455 582.438 107.005 582.459H90.1886C88.6346 582.459 87.4969 582.494 86.4077 582.563L81.0659 582.833C75.3581 583.295 69.7081 584.306 64.194 585.85C53.145 589.011 42.8237 594.308 33.8149 601.441C24.7731 608.561 17.2395 617.409 11.6534 627.47C6.06724 637.53 2.54032 648.602 1.27824 660.039C0.000436664 671.474 0.988363 683.049 4.1856 694.103C7.38284 705.157 12.7268 715.473 19.9122 724.462C27.0712 733.477 35.9551 740.976 46.0452 746.52C56.1354 752.064 67.2294 755.543 78.6794 756.753C80.1779 756.871 81.7041 756.941 83.2304 757.01C84.6179 757.072 86.0054 757.135 87.3512 757.232C87.9617 757.294 88.8289 757.294 89.6614 757.287H524.001V759.112H89.1688V759.118Z" fill="#586470"/>
            <path d="M89.1255 733.645C88.5395 733.663 87.953 733.64 87.3703 733.575C86.2395 733.471 85.0254 733.423 83.8114 733.374C82.9581 733.374 82.0978 733.305 81.2445 733.249C72.8894 732.364 64.7946 729.823 57.4332 725.774C50.0718 721.725 43.5915 716.25 38.3711 709.669C27.8318 696.4 22.951 679.511 24.7875 662.667C25.7103 654.326 28.2862 646.252 32.3646 638.917C36.443 631.582 41.9423 625.132 48.5414 619.945C55.1027 614.751 62.619 610.894 70.6649 608.592C74.6846 607.463 78.8037 606.725 82.965 606.386L90.1869 606.081L110.701 605.963L122.793 605.339C124.592 605.214 126.385 604.999 128.163 604.694C129.03 604.562 129.897 604.43 130.757 604.319C136.084 603.65 141.362 602.643 146.561 601.302L147.157 601.15C152.21 599.988 157.183 598.503 162.045 596.704C192.701 585.929 219.453 566.271 238.89 540.237C258.328 514.203 269.57 482.972 271.185 450.526L271.532 442.46V358.417V0H273.363V442.481L273.017 450.589C271.355 483.379 259.982 514.937 240.342 541.252C220.701 567.567 193.68 587.453 162.711 598.383C157.784 600.202 152.747 601.708 147.629 602.891L147.067 603.029C141.866 604.386 136.582 605.405 131.25 606.081H131.021C130.174 606.192 129.321 606.324 128.468 606.456C126.657 606.733 124.784 607.017 122.918 607.149L107.031 607.891L87.8351 607.926L83.1176 608.189C79.0857 608.528 75.095 609.248 71.1991 610.339C63.3766 612.57 56.0692 616.317 49.693 621.367C43.2838 626.402 37.9428 632.663 33.9822 639.786C30.0216 646.908 27.5208 654.748 26.626 662.848C24.8308 679.21 29.5676 695.62 39.8071 708.511C44.8736 714.902 51.1647 720.218 58.3122 724.148C65.4596 728.078 73.3196 730.542 81.4318 731.397C82.2435 731.453 83.083 731.481 83.9224 731.515C85.1642 731.564 86.4129 731.619 87.6547 731.737C87.9808 731.793 89.0422 731.786 89.736 731.786H524.021V733.617H89.1255V733.645Z" fill="#586470"/>
            </g>
            <defs>
            <clipPath id="clip0_136_1038">
            <rect width="627" height="861" fill="white" transform="translate(-103)"/>
            </clipPath>
            </defs>
        </svg>
    <?php } ?>
</section>

<?php } ?>

<style>
    #<?php echo $default_id; ?> {
        padding: <?php echo $desktopSpacing; ?>;
    }

    @media (max-width: 1024px) {
        #<?php echo $default_id; ?> {
            padding: <?php echo $tabletSpacing; ?>;
        }
    }

    @media (max-width: 768px) {
        #<?php echo $default_id; ?> {
            padding: <?php echo $mobileSpacing; ?>;
        }
    }
</style>